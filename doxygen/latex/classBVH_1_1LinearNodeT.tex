\hypertarget{classBVH_1_1LinearNodeT}{}\doxysection{B\+VH\+::Linear\+NodeT$<$ T, P, BV, K $>$ Class Template Reference}
\label{classBVH_1_1LinearNodeT}\index{BVH::LinearNodeT$<$ T, P, BV, K $>$@{BVH::LinearNodeT$<$ T, P, BV, K $>$}}


Forward declare linear node class.  




{\ttfamily \#include $<$E\+B\+Geometry\+\_\+\+B\+V\+H.\+hpp$>$}

\doxysubsection*{Public Types}
\begin{DoxyCompactItemize}
\item 
\mbox{\Hypertarget{classBVH_1_1LinearNodeT_a073e87d51d44b4cc243c8f90690247a6}\label{classBVH_1_1LinearNodeT_a073e87d51d44b4cc243c8f90690247a6}} 
using \mbox{\hyperlink{classBVH_1_1LinearNodeT_a073e87d51d44b4cc243c8f90690247a6}{Vec3}} = \mbox{\hyperlink{classVec3T}{Vec3T}}$<$ T $>$
\begin{DoxyCompactList}\small\item\em Alias for cutting down on typing. \end{DoxyCompactList}\end{DoxyCompactItemize}
\doxysubsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
\mbox{\Hypertarget{classBVH_1_1LinearNodeT_ae7dbdb102840eb271dadea2f25aa6f8b}\label{classBVH_1_1LinearNodeT_ae7dbdb102840eb271dadea2f25aa6f8b}} 
\mbox{\hyperlink{classBVH_1_1LinearNodeT_ae7dbdb102840eb271dadea2f25aa6f8b}{Linear\+NodeT}} ()
\begin{DoxyCompactList}\small\item\em Constructor. \end{DoxyCompactList}\item 
\mbox{\Hypertarget{classBVH_1_1LinearNodeT_a4b5dd392397794113ad3b5bb2ed5003a}\label{classBVH_1_1LinearNodeT_a4b5dd392397794113ad3b5bb2ed5003a}} 
virtual \mbox{\hyperlink{classBVH_1_1LinearNodeT_a4b5dd392397794113ad3b5bb2ed5003a}{$\sim$\+Linear\+NodeT}} ()
\begin{DoxyCompactList}\small\item\em Destructor. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{classBVH_1_1LinearNodeT_a03e3dd1c74bf9e66ed692130b49c2e0f}{set\+Bounding\+Volume}} (const BV \&a\+\_\+bounding\+Volume) noexcept
\begin{DoxyCompactList}\small\item\em Set the bounding volume. \end{DoxyCompactList}\item 
\mbox{\Hypertarget{classBVH_1_1LinearNodeT_ace68df1290bd44623c694e6b7ebdec6e}\label{classBVH_1_1LinearNodeT_ace68df1290bd44623c694e6b7ebdec6e}} 
void \mbox{\hyperlink{classBVH_1_1LinearNodeT_ace68df1290bd44623c694e6b7ebdec6e}{set\+Primitives\+Offset}} (const unsigned long a\+\_\+primitives\+Offset) noexcept
\begin{DoxyCompactList}\small\item\em Set the offset into the primitives array. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{classBVH_1_1LinearNodeT_a1a91e5f540da1b1bb85224db94cd53d8}{set\+Num\+Primitives}} (const int a\+\_\+num\+Primitives) noexcept
\begin{DoxyCompactList}\small\item\em Set number of primitives. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{classBVH_1_1LinearNodeT_a3a972ef5ea9abc6e2ead9f453e233e2f}{set\+Child\+Offset}} (const unsigned long a\+\_\+child\+Offset, const int a\+\_\+which\+Child) noexcept
\begin{DoxyCompactList}\small\item\em Set the child offsets. \end{DoxyCompactList}\item 
\mbox{\Hypertarget{classBVH_1_1LinearNodeT_a152b12723c86f8fcb7522562cd97cd67}\label{classBVH_1_1LinearNodeT_a152b12723c86f8fcb7522562cd97cd67}} 
const BV \& \mbox{\hyperlink{classBVH_1_1LinearNodeT_a152b12723c86f8fcb7522562cd97cd67}{get\+Bounding\+Volume}} () const noexcept
\begin{DoxyCompactList}\small\item\em Get the node bounding volume. return m\+\_\+bounding\+Volume. \end{DoxyCompactList}\item 
const unsigned long \& \mbox{\hyperlink{classBVH_1_1LinearNodeT_a8cfca65bd808adc8eb2793e7d7aabcd3}{get\+Primitives\+Offset}} () const noexcept
\begin{DoxyCompactList}\small\item\em Get the primitives offset. \end{DoxyCompactList}\item 
const unsigned long \& \mbox{\hyperlink{classBVH_1_1LinearNodeT_a245e67b6824cadf1733c3c9176259106}{get\+Num\+Primitives}} () const noexcept
\begin{DoxyCompactList}\small\item\em Get the number of primitives. \end{DoxyCompactList}\item 
const std\+::array$<$ unsigned long, K $>$ \& \mbox{\hyperlink{classBVH_1_1LinearNodeT_af08feacbaa148425a896c196b0b6d1da}{get\+Child\+Offsets}} () const noexcept
\begin{DoxyCompactList}\small\item\em Get the child offsets. \end{DoxyCompactList}\item 
\mbox{\Hypertarget{classBVH_1_1LinearNodeT_aba361834e3d013725a92ec4b45633584}\label{classBVH_1_1LinearNodeT_aba361834e3d013725a92ec4b45633584}} 
bool \mbox{\hyperlink{classBVH_1_1LinearNodeT_aba361834e3d013725a92ec4b45633584}{is\+Leaf}} () const noexcept
\begin{DoxyCompactList}\small\item\em Is leaf or not. \end{DoxyCompactList}\item 
T \mbox{\hyperlink{classBVH_1_1LinearNodeT_a2bf5b1c514a20754d527b17e1c664630}{get\+Distance\+To\+Bounding\+Volume}} (const \mbox{\hyperlink{classBVH_1_1LinearNodeT_a073e87d51d44b4cc243c8f90690247a6}{Vec3}} \&a\+\_\+point) const noexcept
\begin{DoxyCompactList}\small\item\em Get the distance from a 3D point to the bounding volume. \end{DoxyCompactList}\item 
T \mbox{\hyperlink{classBVH_1_1LinearNodeT_a1a0a50ba8c1c0601f12ae02857246b1f}{get\+Distance\+To\+Primitives}} (const \mbox{\hyperlink{classBVH_1_1LinearNodeT_a073e87d51d44b4cc243c8f90690247a6}{Vec3}} \&a\+\_\+point, const std\+::vector$<$ std\+::shared\+\_\+ptr$<$ const P $>$ $>$ \&a\+\_\+primitives) const noexcept
\begin{DoxyCompactList}\small\item\em Compute signed distance to primitives. \end{DoxyCompactList}\end{DoxyCompactItemize}
\doxysubsection*{Protected Attributes}
\begin{DoxyCompactItemize}
\item 
\mbox{\Hypertarget{classBVH_1_1LinearNodeT_acef96b811ea69cd649fda35da082b361}\label{classBVH_1_1LinearNodeT_acef96b811ea69cd649fda35da082b361}} 
BV \mbox{\hyperlink{classBVH_1_1LinearNodeT_acef96b811ea69cd649fda35da082b361}{m\+\_\+bounding\+Volume}}
\begin{DoxyCompactList}\small\item\em Bounding volume. \end{DoxyCompactList}\item 
\mbox{\Hypertarget{classBVH_1_1LinearNodeT_a05efc0076443c7131187adfadaad81ea}\label{classBVH_1_1LinearNodeT_a05efc0076443c7131187adfadaad81ea}} 
unsigned long \mbox{\hyperlink{classBVH_1_1LinearNodeT_a05efc0076443c7131187adfadaad81ea}{m\+\_\+primitives\+Offset}}
\begin{DoxyCompactList}\small\item\em Offset into primitives array. \end{DoxyCompactList}\item 
\mbox{\Hypertarget{classBVH_1_1LinearNodeT_a59a4aff1eeac58606f4854e334e10a17}\label{classBVH_1_1LinearNodeT_a59a4aff1eeac58606f4854e334e10a17}} 
int \mbox{\hyperlink{classBVH_1_1LinearNodeT_a59a4aff1eeac58606f4854e334e10a17}{m\+\_\+num\+Primitives}}
\begin{DoxyCompactList}\small\item\em Number of primitives. \end{DoxyCompactList}\item 
\mbox{\Hypertarget{classBVH_1_1LinearNodeT_a2a160d04d0bea69de7eb949fd9d56dda}\label{classBVH_1_1LinearNodeT_a2a160d04d0bea69de7eb949fd9d56dda}} 
std\+::array$<$ unsigned long, K $>$ \mbox{\hyperlink{classBVH_1_1LinearNodeT_a2a160d04d0bea69de7eb949fd9d56dda}{m\+\_\+child\+Offsets}}
\begin{DoxyCompactList}\small\item\em Offset to child nodes. \end{DoxyCompactList}\end{DoxyCompactItemize}


\doxysubsection{Detailed Description}
\subsubsection*{template$<$class T, class P, class BV, int K$>$\newline
class B\+V\+H\+::\+Linear\+Node\+T$<$ T, P, B\+V, K $>$}

Forward declare linear node class. 

Node type for linearized (flattened) \mbox{\hyperlink{namespaceBVH}{B\+VH}}. This will be constructed from the other (conventional) \mbox{\hyperlink{namespaceBVH}{B\+VH}} type.

T is the precision used in the \mbox{\hyperlink{namespaceBVH}{B\+VH}} computations, P is the enclosing primitive and BV is the bounding volume used in the \mbox{\hyperlink{namespaceBVH}{B\+VH}}. K is the tree degree.

T is the precision for Vec3, P is the primitive type you want to enclose, BV is the bounding volume you use for it.

\begin{DoxyNote}{Note}
P M\+U\+ST supply function signed\+Distance(...) BV must supply a function get\+Distance (had this been C++20, we would have use concepts to enforce this). Note that Linear\+Node is the result of a flattened \mbox{\hyperlink{namespaceBVH}{B\+VH}} hierarchy where nodes are stored with depth-\/first ordering for improved cache-\/location in the downward traversal.

This class exists so that we can fit the nodes with a smaller memory footprint. The standard \mbox{\hyperlink{namespaceBVH}{B\+VH}} node (\mbox{\hyperlink{classBVH_1_1NodeT}{NodeT}}) is very useful when building the tree but less useful when traversing it since it stores references to the primitives in the node itself. It will span multiple cache lines. This node exists so that we can fit all the \mbox{\hyperlink{namespaceBVH}{B\+VH}} info onto fewer cache lines. The number of cache lines will depend on the tree degree, precision, and bounding volume that is chosen.
\end{DoxyNote}
\begin{DoxyRefDesc}{Todo}
\item[\mbox{\hyperlink{todo__todo000001}{Todo}}]There\textquotesingle{}s a minor optimization that can be made to the memory alignment, which is as follows\+: For a leaf node we never really need the m\+\_\+child\+Offsets array, and for a regular node we never really need the m\+\_\+primitives\+Offset member. Moreover, m\+\_\+child\+Offsets could be made into a K-\/1 sized array because we happen to know that the linearized hierarchy will store the first child node immediately after the regular node. We could shave off 16 bytes of storage, which would mean that a double-\/precision binary tree only takes up one word of C\+PU memory. \end{DoxyRefDesc}


\doxysubsection{Member Function Documentation}
\mbox{\Hypertarget{classBVH_1_1LinearNodeT_af08feacbaa148425a896c196b0b6d1da}\label{classBVH_1_1LinearNodeT_af08feacbaa148425a896c196b0b6d1da}} 
\index{BVH::LinearNodeT$<$ T, P, BV, K $>$@{BVH::LinearNodeT$<$ T, P, BV, K $>$}!getChildOffsets@{getChildOffsets}}
\index{getChildOffsets@{getChildOffsets}!BVH::LinearNodeT$<$ T, P, BV, K $>$@{BVH::LinearNodeT$<$ T, P, BV, K $>$}}
\doxysubsubsection{\texorpdfstring{getChildOffsets()}{getChildOffsets()}}
{\footnotesize\ttfamily template$<$class T , class P , class BV , int K$>$ \\
const std\+::array$<$ unsigned long, K $>$ \& \mbox{\hyperlink{classBVH_1_1LinearNodeT}{B\+V\+H\+::\+Linear\+NodeT}}$<$ T, P, BV, K $>$\+::get\+Child\+Offsets\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [noexcept]}}



Get the child offsets. 

\begin{DoxyReturn}{Returns}
Returns m\+\_\+child\+Offsets 
\end{DoxyReturn}
\mbox{\Hypertarget{classBVH_1_1LinearNodeT_a2bf5b1c514a20754d527b17e1c664630}\label{classBVH_1_1LinearNodeT_a2bf5b1c514a20754d527b17e1c664630}} 
\index{BVH::LinearNodeT$<$ T, P, BV, K $>$@{BVH::LinearNodeT$<$ T, P, BV, K $>$}!getDistanceToBoundingVolume@{getDistanceToBoundingVolume}}
\index{getDistanceToBoundingVolume@{getDistanceToBoundingVolume}!BVH::LinearNodeT$<$ T, P, BV, K $>$@{BVH::LinearNodeT$<$ T, P, BV, K $>$}}
\doxysubsubsection{\texorpdfstring{getDistanceToBoundingVolume()}{getDistanceToBoundingVolume()}}
{\footnotesize\ttfamily template$<$class T , class P , class BV , int K$>$ \\
T \mbox{\hyperlink{classBVH_1_1LinearNodeT}{B\+V\+H\+::\+Linear\+NodeT}}$<$ T, P, BV, K $>$\+::get\+Distance\+To\+Bounding\+Volume (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{classBVH_1_1LinearNodeT_a073e87d51d44b4cc243c8f90690247a6}{Vec3}} \&}]{a\+\_\+point }\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [noexcept]}}



Get the distance from a 3D point to the bounding volume. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\texttt{ in}}  & {\em a\+\_\+point} & 3D point \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
Returns distance to bounding volume. A zero distance implies that the input point is inside the bounding volume. 
\end{DoxyReturn}
\mbox{\Hypertarget{classBVH_1_1LinearNodeT_a1a0a50ba8c1c0601f12ae02857246b1f}\label{classBVH_1_1LinearNodeT_a1a0a50ba8c1c0601f12ae02857246b1f}} 
\index{BVH::LinearNodeT$<$ T, P, BV, K $>$@{BVH::LinearNodeT$<$ T, P, BV, K $>$}!getDistanceToPrimitives@{getDistanceToPrimitives}}
\index{getDistanceToPrimitives@{getDistanceToPrimitives}!BVH::LinearNodeT$<$ T, P, BV, K $>$@{BVH::LinearNodeT$<$ T, P, BV, K $>$}}
\doxysubsubsection{\texorpdfstring{getDistanceToPrimitives()}{getDistanceToPrimitives()}}
{\footnotesize\ttfamily template$<$class T , class P , class BV , int K$>$ \\
T \mbox{\hyperlink{classBVH_1_1LinearNodeT}{B\+V\+H\+::\+Linear\+NodeT}}$<$ T, P, BV, K $>$\+::get\+Distance\+To\+Primitives (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{classBVH_1_1LinearNodeT_a073e87d51d44b4cc243c8f90690247a6}{Vec3}} \&}]{a\+\_\+point,  }\item[{const std\+::vector$<$ std\+::shared\+\_\+ptr$<$ const P $>$ $>$ \&}]{a\+\_\+primitives }\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [noexcept]}}



Compute signed distance to primitives. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\texttt{ in}}  & {\em a\+\_\+point} & Point \\
\hline
\mbox{\texttt{ in}}  & {\em a\+\_\+primitives} & List of primitives \\
\hline
\end{DoxyParams}
\begin{DoxyNote}{Note}
Only call if this is a leaf node. 
\end{DoxyNote}
\mbox{\Hypertarget{classBVH_1_1LinearNodeT_a245e67b6824cadf1733c3c9176259106}\label{classBVH_1_1LinearNodeT_a245e67b6824cadf1733c3c9176259106}} 
\index{BVH::LinearNodeT$<$ T, P, BV, K $>$@{BVH::LinearNodeT$<$ T, P, BV, K $>$}!getNumPrimitives@{getNumPrimitives}}
\index{getNumPrimitives@{getNumPrimitives}!BVH::LinearNodeT$<$ T, P, BV, K $>$@{BVH::LinearNodeT$<$ T, P, BV, K $>$}}
\doxysubsubsection{\texorpdfstring{getNumPrimitives()}{getNumPrimitives()}}
{\footnotesize\ttfamily template$<$class T , class P , class BV , int K$>$ \\
const unsigned long \& \mbox{\hyperlink{classBVH_1_1LinearNodeT}{B\+V\+H\+::\+Linear\+NodeT}}$<$ T, P, BV, K $>$\+::get\+Num\+Primitives\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [noexcept]}}



Get the number of primitives. 

\begin{DoxyReturn}{Returns}
Returns m\+\_\+num\+Primitives 
\end{DoxyReturn}
\mbox{\Hypertarget{classBVH_1_1LinearNodeT_a8cfca65bd808adc8eb2793e7d7aabcd3}\label{classBVH_1_1LinearNodeT_a8cfca65bd808adc8eb2793e7d7aabcd3}} 
\index{BVH::LinearNodeT$<$ T, P, BV, K $>$@{BVH::LinearNodeT$<$ T, P, BV, K $>$}!getPrimitivesOffset@{getPrimitivesOffset}}
\index{getPrimitivesOffset@{getPrimitivesOffset}!BVH::LinearNodeT$<$ T, P, BV, K $>$@{BVH::LinearNodeT$<$ T, P, BV, K $>$}}
\doxysubsubsection{\texorpdfstring{getPrimitivesOffset()}{getPrimitivesOffset()}}
{\footnotesize\ttfamily template$<$class T , class P , class BV , int K$>$ \\
const unsigned long \& \mbox{\hyperlink{classBVH_1_1LinearNodeT}{B\+V\+H\+::\+Linear\+NodeT}}$<$ T, P, BV, K $>$\+::get\+Primitives\+Offset\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [noexcept]}}



Get the primitives offset. 

\begin{DoxyReturn}{Returns}
Returns m\+\_\+primitives\+Offset 
\end{DoxyReturn}
\mbox{\Hypertarget{classBVH_1_1LinearNodeT_a03e3dd1c74bf9e66ed692130b49c2e0f}\label{classBVH_1_1LinearNodeT_a03e3dd1c74bf9e66ed692130b49c2e0f}} 
\index{BVH::LinearNodeT$<$ T, P, BV, K $>$@{BVH::LinearNodeT$<$ T, P, BV, K $>$}!setBoundingVolume@{setBoundingVolume}}
\index{setBoundingVolume@{setBoundingVolume}!BVH::LinearNodeT$<$ T, P, BV, K $>$@{BVH::LinearNodeT$<$ T, P, BV, K $>$}}
\doxysubsubsection{\texorpdfstring{setBoundingVolume()}{setBoundingVolume()}}
{\footnotesize\ttfamily template$<$class T , class P , class BV , int K$>$ \\
void \mbox{\hyperlink{classBVH_1_1LinearNodeT}{B\+V\+H\+::\+Linear\+NodeT}}$<$ T, P, BV, K $>$\+::set\+Bounding\+Volume (\begin{DoxyParamCaption}\item[{const BV \&}]{a\+\_\+bounding\+Volume }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [noexcept]}}



Set the bounding volume. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\texttt{ in}}  & {\em a\+\_\+bounding\+Volume} & Bounding volume for this node. \\
\hline
\end{DoxyParams}
\mbox{\Hypertarget{classBVH_1_1LinearNodeT_a3a972ef5ea9abc6e2ead9f453e233e2f}\label{classBVH_1_1LinearNodeT_a3a972ef5ea9abc6e2ead9f453e233e2f}} 
\index{BVH::LinearNodeT$<$ T, P, BV, K $>$@{BVH::LinearNodeT$<$ T, P, BV, K $>$}!setChildOffset@{setChildOffset}}
\index{setChildOffset@{setChildOffset}!BVH::LinearNodeT$<$ T, P, BV, K $>$@{BVH::LinearNodeT$<$ T, P, BV, K $>$}}
\doxysubsubsection{\texorpdfstring{setChildOffset()}{setChildOffset()}}
{\footnotesize\ttfamily template$<$class T , class P , class BV , int K$>$ \\
void \mbox{\hyperlink{classBVH_1_1LinearNodeT}{B\+V\+H\+::\+Linear\+NodeT}}$<$ T, P, BV, K $>$\+::set\+Child\+Offset (\begin{DoxyParamCaption}\item[{const unsigned long}]{a\+\_\+child\+Offset,  }\item[{const int}]{a\+\_\+which\+Child }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [noexcept]}}



Set the child offsets. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\texttt{ in}}  & {\em a\+\_\+child\+Offset} & Offset in node array. \\
\hline
\mbox{\texttt{ in}}  & {\em a\+\_\+which\+Child} & Child index in m\+\_\+children\+Offsets. Must be \mbox{[}0,K-\/1\mbox{]} \\
\hline
\end{DoxyParams}
\mbox{\Hypertarget{classBVH_1_1LinearNodeT_a1a91e5f540da1b1bb85224db94cd53d8}\label{classBVH_1_1LinearNodeT_a1a91e5f540da1b1bb85224db94cd53d8}} 
\index{BVH::LinearNodeT$<$ T, P, BV, K $>$@{BVH::LinearNodeT$<$ T, P, BV, K $>$}!setNumPrimitives@{setNumPrimitives}}
\index{setNumPrimitives@{setNumPrimitives}!BVH::LinearNodeT$<$ T, P, BV, K $>$@{BVH::LinearNodeT$<$ T, P, BV, K $>$}}
\doxysubsubsection{\texorpdfstring{setNumPrimitives()}{setNumPrimitives()}}
{\footnotesize\ttfamily template$<$class T , class P , class BV , int K$>$ \\
void \mbox{\hyperlink{classBVH_1_1LinearNodeT}{B\+V\+H\+::\+Linear\+NodeT}}$<$ T, P, BV, K $>$\+::set\+Num\+Primitives (\begin{DoxyParamCaption}\item[{const int}]{a\+\_\+num\+Primitives }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [noexcept]}}



Set number of primitives. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\texttt{ in}}  & {\em a\+\_\+num\+Primitives} & Number of primitives. \\
\hline
\end{DoxyParams}


The documentation for this class was generated from the following files\+:\begin{DoxyCompactItemize}
\item 
Source/\mbox{\hyperlink{EBGeometry__BVH_8hpp}{E\+B\+Geometry\+\_\+\+B\+V\+H.\+hpp}}\item 
Source/\mbox{\hyperlink{EBGeometry__BVHImplem_8hpp}{E\+B\+Geometry\+\_\+\+B\+V\+H\+Implem.\+hpp}}\end{DoxyCompactItemize}
